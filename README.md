# 실전 스프링부트 JPA 1
*기능*
- 회원기능
	- 회원 등록
	- 회원 조회
- 상품기능
	- 상품 등록
	- 상품 수정
	- 상품 조회
- 주문기능
	- 상품 주문
	- 주문 내역 조회
	- 주문 취소
- 기타
	- 상품은 재고 관리가 필요하다.
	- 상품의 종류는 도서, 음반, 영화가 있다.
	- 상품을 카테고리로 구분할 수 있다.
	- 상품 주문시 배송 정보를 입력할 수 있다.

![](image/img1.png)

회원, 주문, 상품 관계
: 회원은 여러 상품 주문, 한 번 주문할 때 여러 상품 선택 가능 - 다대다
주문상품을 만들어서 다대일 관계로

![](image/img2.png)

회원테이블

![](image/img3.png)

### 연관관계 매핑 분석
회원과 주문
: 일대다, 다대일의 양방향 관계로 연관관계 주인 필요.
외래키가 있는 곳을 연관관계의 주인으로 Order.member를 ORDERS.MEMBER_ID 외래키와 매핑

주문상품과 주문
: 다대일 양방향 관계. 외래키가 주문상품에 있으므로 주문상품이 연관관계 주인

주문상품과 상품
: 다대일 단방향 관계.

주문과 배송
: 일대일 단방향 관계.

카테고리와 상품 : 다대다 양방향 관계. @ManyToMany

> 외래 키가 있는 곳을 연관관계의 주인으로 정하기.  
> 단순히 외래키를 누가 관리하느냐의 문제  

## 엔티티 클래스
- 실무에서는 가급적 Getter 열고 Setter 닫기
- Setter 대신에 변경 지점이 명확해지도록 변경을 위한 비즈니스 메서드를 별도로 제공
- 값 타입은 변경 불가능하게 설계해야함
@Setter를 제거하고, 생성자에서 값을 모두 초기화하도록
JPA 스펙상 엔티티나 임베디드 타입은 자바 기본생성자를 public or protected로 둬야함.
